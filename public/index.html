<!doctype html>
<html lang="ko">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title data-lang-key="pageTitle">ReadMind - Speed Reading & Text Analysis</title>
        <link rel="icon" href="favicon.png" type="image/png" />
        <script src="https://cdn.tailwindcss.com"></script>
        <link rel="preconnect" href="https://fonts.googleapis.com" />
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
        <style>
            body {
                background-color: var(--md-sys-color-background);
                color: var(--md-sys-color-on-background);
            }
            .main-card, #document-sidebar, #auth-modal, .document-item, #confirmation-modal {
                background-color: var(--md-sys-color-surface);
                transition: background-color 0.2s ease-in-out;
            }
            .settings-card {
                background-color: var(--md-sys-color-surface-variant);
            }
            #word-display-area {
                background-color: var(--md-sys-color-secondary-container);
                color: var(--md-sys-color-on-secondary-container);
            }
            #site-title { color: var(--md-sys-color-primary); }
            #progress-bar-fill { background-color: var(--md-sys-color-primary); }
            .fixation-point { color: var(--md-sys-color-error); font-weight: bold; }
            #document-sidebar { border-right-color: var(--md-sys-color-outline-variant); }
            #document-sidebar .border-b, #document-sidebar .border-t { border-color: var(--md-sys-color-outline-variant); }
            .dark .editor-toolbar { background-color: var(--md-sys-color-surface-variant); border-color: var(--md-sys-color-outline-variant); }
            .dark .editor-toolbar a { color: var(--md-sys-color-on-surface-variant) !important; }
            .dark .editor-toolbar a:hover, .dark .editor-toolbar a.active { background-color: var(--md-sys-color-outline-variant); }
            .dark .CodeMirror { background-color: var(--md-sys-color-surface); color: var(--md-sys-color-on-surface); border-color: var(--md-sys-color-outline-variant) !important; }
            .dark .CodeMirror-cursor { border-left-color: var(--md-sys-color-on-surface) !important; }
            .dark .editor-preview, .dark .editor-preview-side { background-color: var(--md-sys-color-background); }
        </style>
        <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&family=Noto+Sans+KR:wght@400;500;700&family=Source+Serif+4:opsz,wght@8..60,400;8..60,700&display=swap" rel="stylesheet">
        <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/simplemde/1.11.2/simplemde.min.css" />
        <script type="importmap">
            { "imports": { "@material/web/": "https://esm.run/@material/web/" } }
        </script>
        <script type="module">
            import '@material/web/all.js';
            import {styles as typescaleStyles} from '@material/web/typography/md-typescale-styles.js';
            document.adoptedStyleSheets.push(typescaleStyles.styleSheet);
        </script>
        <script src="https://www.google.com/recaptcha/api.js" async defer></script>
        <link rel="stylesheet" href="themes.css" />
    </head>
    <body class="text-slate-800 dark:text-slate-200" style="font-family: 'Roboto', sans-serif;">
        <div class="relative flex w-full h-screen overflow-x-hidden">
            <aside id="document-sidebar" class="fixed inset-y-0 left-0 z-40 w-full sm:w-80 border-r flex flex-col transform -translate-x-full md:relative md:translate-x-0 md:w-1/4 transition-transform duration-300 ease-in-out">
                {/* Sidebar Content */}
            </aside>
            <main class="flex-grow p-4 sm:p-8 overflow-y-auto w-full">
                <div class="main-card p-6 sm:p-8 rounded-xl shadow-xl w-full max-w-4xl mx-auto">
                    <header class="mb-6">
                        {/* Header Content */}
                    </header>
                    <div id="editor-container" class="mb-4">
                         <textarea id="text-input" rows="8"></textarea>
                    </div>
                    <div id="reader-container">
                        <div id="word-display-area" class="p-8 text-center rounded-xl min-h-[120px] flex items-center justify-center">
                            <span id="current-word" class="text-4xl sm:text-5xl lg:text-6xl font-bold"></span>
                        </div>
                        <div class="w-full h-2 bg-slate-200 dark:bg-slate-700 rounded-full mt-3 mb-1 overflow-hidden">
                            <div id="progress-bar-fill" class="h-full rounded-full"></div>
                        </div>
                        <div class="text-center text-sm text-slate-500 dark:text-slate-400 mb-6">
                            <span id="progress-info"></span>
                        </div>
                    </div>
                    <div class="settings-card mb-6 p-4 rounded-lg">
                        <div class="grid grid-cols-1 sm:grid-cols-4 gap-6 items-center">
                            <div class="sm:col-span-4 flex flex-col">
                                <md-slider id="wpm-input" min="50" max="1000" value="250" step="10" labeled ticks class="w-full"></md-slider>
                            </div>
                            <div class="sm:col-span-2">
                                <md-outlined-select id="chunk-size-selector" label="Chunk Size" title="Words shown at a time" class="w-full">
                                    <md-menu-item value="1" selected><div slot="headline">1</div></md-menu-item>
                                    <md-menu-item value="2"><div slot="headline">2</div></md-menu-item>
                                    <md-menu-item value="3"><div slot="headline">3</div></md-menu-item>
                                </md-outlined-select>
                            </div>
                            <div class="sm:col-span-2">
                                <md-outlined-select id="font-family-selector" label="Font Family" class="w-full">
                                    <md-menu-item value="'Roboto', sans-serif" selected><div slot="headline">Roboto</div></md-menu-item>
                                    <md-menu-item value="'Noto Sans KR', sans-serif"><div slot="headline">Noto Sans KR</div></md-menu-item>
                                    <md-menu-item value="'Source Serif 4', serif"><div slot="headline">Source Serif</div></md-menu-item>
                                </md-outlined-select>
                            </div>
                            <div class="sm:col-span-2 flex flex-col">
                                <label id="font-size-label" class="block text-xs sm:text-sm font-medium mb-1">Font Size: 48px</label>
                                <md-slider id="font-size-slider" min="12" max="48" value="48" step="1" class="w-full"></md-slider>
                            </div>
                             <div class="sm:col-span-2 flex justify-center">
                               <label for="fixation-toggle" class="flex items-center gap-2 cursor-pointer">
                                    <span data-lang-key="fixationPointLabel">Fixation Point</span>
                                    <md-switch id="fixation-toggle" icons></md-switch>
                                </label>
                            </div>
                        </div>
                    </div>
                    <div class="flex justify-center gap-3">
                        <md-filled-button id="start-button"></md-filled-button>
                        <md-filled-tonal-button id="pause-button"></md-filled-tonal-button>
                        <md-outlined-button id="reset-button"></md-outlined-button>
                    </div>
                    <div class="mt-6 pt-4 border-t border-slate-200 dark:border-slate-700">
                        <h3 class="text-lg font-semibold text-center mb-2" data-lang-key="detailedStatsTitle">Detailed Analysis</h3>
                        <div class="grid grid-cols-2 sm:grid-cols-4 gap-4 text-center">
                            <div>
                                <div class="text-sm" data-lang-key="readabilityScoreLabel">Readability</div>
                                <div id="readability-score" class="text-2xl font-bold">-</div>
                            </div>
                            <div>
                                <div class="text-sm" data-lang-key="avgSentenceLengthLabel">Avg. Sentence</div>
                                <div id="avg-sentence-length" class="text-2xl font-bold">-</div>
                            </div>
                            <div>
                                <div class="text-sm" data-lang-key="syllableCountLabel">Syllables</div>
                                <div id="syllable-count" class="text-2xl font-bold">-</div>
                            </div>
                            <div>
                                <div class="text-sm" data-lang-key="lexicalDiversityLabel">Lexical Diversity</div>
                                <div id="lexical-diversity" class="text-2xl font-bold">-</div>
                            </div>
                        </div>
                    </div>
                </div>
            </main>
        </div>
        {/* Modals and other hidden elements */}
        <script src="https://cdnjs.cloudflare.com/ajax/libs/simplemde/1.11.2/simplemde.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/kuromoji/build/kuromoji.js"></script>
        <script src="https://unpkg.com/text-readability@1.1.1/main.js"></script>
        <script type="module" src="translations.js"></script>
        <script type="module" src="main.js"></script>
    </body>
</html>
